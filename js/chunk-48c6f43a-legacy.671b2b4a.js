(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48c6f43a"],{be6c:function(t,e,a){"use strict";var s=a("2fa3"),i=function(){return localStorage.getItem("token")};e["a"]={adminSignIn:function(t){var e=t.account,a=t.password;return s["b"].post("api/admin/signin",{account:e,password:a})},deleteTweet:function(t){var e=t.tweetId;return s["b"].delete("api/admin/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(i())}})},getAdminUsers:function(){return s["b"].get("api/admin/users",{headers:{Authorization:"Bearer ".concat(i())}})}}},fa6a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-double-column"},[a("div",{staticClass:"left-container"},[a("AdminNavBar")],1),a("div",{staticClass:"middle-container"},[t._m(0),t.isLoading?a("img",{staticClass:"spinner"}):t._l(t.tweetCards,(function(e){return a("div",{key:e.id,staticClass:"main-tweets"},[a("AdminFeedList",{attrs:{"tweet-card":e},on:{"after-delete":t.afterDelete}})],1)}))],2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-wrapper"},[a("h3",{staticClass:"main-title"},[t._v("推文清單")])])}],r=a("2909"),n=a("1da1"),c=(a("96cf"),a("d9e2"),a("4de4"),a("d3b7"),a("fc06")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tweetCard-wrapper"},[a("div",{staticClass:"card-left avatar"},[a("img",{staticClass:"avatar",attrs:{src:t._f("emptyImage")(t.tweetUser.avatar)}})]),a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-head"},[a("h5",{staticClass:"card-name"},[t._v(" "+t._s(t.tweetUser.name)+" ")]),a("h5",{staticClass:"card-account"},[t._v(" "+t._s(t._f("accountTag")(t.tweetUser.account))+" ")]),a("span",[t._v("．")]),a("h5",{staticClass:"card-time"},[t._v(" "+t._s(t._f("fromNow")(t.createdAt))+" ")]),a("div",{staticClass:"card-cancel"},[a("img",{staticClass:"cross-grey",on:{click:function(e){return t.deleteCard(t.id)}}})])]),a("div",{staticClass:"card-description"},[t._v(" "+t._s(t._f("wordLimit")(t.description))+" ")])])])},d=[],l=(a("a4d3"),a("e01a"),a("be6c")),u=a("2fa3"),f=a("2708"),m={mixins:[f["c"],f["a"],f["b"]],props:{tweetCard:{type:Object,required:!0}},data:function(){return{id:0,tweetUser:{},description:"",createdAt:"",isProcessing:!1}},methods:{fetchTweetCard:function(){var t=this.tweetCard,e=t.User,a=t.description,s=t.id,i=t.createdAt;this.id=s,this.tweetUser=e,this.description=a,this.createdAt=i},deleteCard:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,l["a"].deleteTweet({tweetId:t});case 4:if(s=a.sent,i=s.data,r=s.statusText,e.isProcessing=!1,"OK"===r){a.next=10;break}throw new Error(i);case 10:u["a"].fire({icon:"success",title:i.message}),e.$emit("after-delete",t),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](0),u["a"].fire({icon:"error",title:"無法刪除貼文，請稍後再試"});case 17:case"end":return a.stop()}}),a,null,[[0,14]])})))()}},created:function(){this.fetchTweetCard()},filters:{wordLimit:function(t){return t.length>50?t.substring(0,49)+"...":t}}},v=m,w=a("2877"),h=Object(w["a"])(v,o,d,!1,null,null,null),C=h.exports,p=a("6783"),g={components:{AdminNavBar:c["a"],AdminFeedList:C},data:function(){return{tweetCards:[],isLoading:!1,isProcessing:!1}},methods:{fetchTweetCards:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,p["a"].getAllTweets();case 4:if(a=e.sent,s=a.data,i=a.statusText,t.isLoading=!1,"OK"===i){e.next=10;break}throw new Error(i);case 10:t.tweetCards=Object(r["a"])(s),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),t.isLoading=!0,u["a"].fire({icon:"error",title:"無法取得主頁資料，請稍後再試"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},afterDelete:function(t){this.tweetCards=this.tweetCards.filter((function(e){return e.id!==t}))}},created:function(){this.fetchTweetCards()}},_=g,b=Object(w["a"])(_,s,i,!1,null,null,null);e["default"]=b.exports},fc06:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navBar-wrapper"},[a("div",{staticClass:"container"},[a("div",{staticClass:"logoContainer"},[a("router-link",{attrs:{to:"/admin/tweets"}},[a("img",{staticClass:"logo",attrs:{alt:"admin/tweets"}})])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"homeTab"},[a("router-link",{staticClass:"navItem",attrs:{to:"/admin/tweets"}},[a("div",{staticClass:"icon"},[a("img",{staticClass:"home",attrs:{alt:""}})]),t._v(" 推文清單 ")])],1),a("div",{staticClass:"selfTab"},[a("router-link",{staticClass:"navItem",attrs:{to:"/admin/users"}},[a("div",{staticClass:"icon"},[a("img",{staticClass:"person",attrs:{alt:""}})]),t._v(" 使用者清單 ")])],1)]),a("div",{staticClass:"logoutTab"},[a("button",{staticClass:"logoutButton",on:{click:function(e){return t.logout()}}},[t._m(0),t._v(" 登出 ")])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon"},[a("img",{staticClass:"logout",attrs:{alt:""}})])}],r=a("5530"),n=a("2f62"),c={computed:Object(r["a"])({},Object(n["b"])(["isAuthenticated"])),methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/admin/signin")}}},o=c,d=a("2877"),l=Object(d["a"])(o,s,i,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-48c6f43a-legacy.671b2b4a.js.map
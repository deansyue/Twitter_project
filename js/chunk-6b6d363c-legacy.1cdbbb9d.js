(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b6d363c"],{be6c:function(t,e,r){"use strict";var n=r("2fa3"),a=function(){return localStorage.getItem("token")};e["a"]={adminSignIn:function(t){var e=t.account,r=t.password;return n["b"].post("api/admin/signin",{account:e,password:r})},deleteTweet:function(t){var e=t.tweetId;return n["b"].delete("api/admin/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(a())}})},getAdminUsers:function(){return n["b"].get("api/admin/users",{headers:{Authorization:"Bearer ".concat(a())}})}}},d946:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"signin-wrapper"},[r("img",{staticClass:"logo-big",attrs:{alt:""}}),r("h2",[t._v("後台登入")]),r("div",{staticClass:"form-wrapper"},[r("form",{attrs:{id:"signInForm"},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleFormSubmit.apply(null,arguments)}}},[r("label",{class:["label",{isInvalid:t.account.isInvalid}],attrs:{for:""}},[t._v(" 帳號 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.text,expression:"account.text",modifiers:{trim:!0}}],attrs:{name:"account",type:"text"},domProps:{value:t.account.text},on:{input:function(e){e.target.composing||t.$set(t.account,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[t._v(t._s(t.worLimitMessage(t.account)))]),r("h5",[t._v(t._s(t.wordLimitCount(t.account)))])]),r("label",{class:["label",{isInvalid:t.password.isInvalid}],attrs:{for:""}},[t._v(" 密碼 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password.text,expression:"password.text",modifiers:{trim:!0}}],attrs:{name:"password",type:"password",autocomplete:"off"},domProps:{value:t.password.text},on:{input:function(e){e.target.composing||t.$set(t.password,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[t._v(t._s(t.worLimitMessage(t.password)))]),r("h5",[t._v(t._s(t.wordLimitCount(t.password)))])]),r("button",{staticClass:"btn active",attrs:{form:"signInForm",type:"submit",disabled:t.isProcessing}},[t._v(" 登入 ")])])]),r("div",{staticClass:"link-wrapper"},[r("router-link",{staticClass:"link",attrs:{to:"/signin"}},[t._v(" 前台登入 ")])],1)])},a=[],s=r("1da1"),i=(r("96cf"),r("d9e2"),r("be6c")),o=r("2fa3"),c={data:function(){return{account:{text:"",isInvalid:!1},password:{text:"",isInvalid:!1},isProcessing:!1}},computed:{worLimitMessage:function(){return function(t){return t.text.length>50?(t.isInvalid=!0,"字數超過上限！"):(t.isInvalid=!1,"")}},wordLimitCount:function(){return function(t){return t.text.length<1?"":t.text.length+"/50"}}},methods:{handleFormSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.account.text,n=t.password.text,r&&n){e.next=7;break}return e.abrupt("return",o["a"].fire({icon:"error",title:"帳號密碼不可空白"}));case 7:if(!(r.length>50||n.length>50)){e.next=9;break}return e.abrupt("return",o["a"].fire({icon:"error",title:"字數超過上限"}));case 9:return t.isProcessing=!0,e.next=12,i["a"].adminSignIn({account:r,password:n});case 12:if(a=e.sent,s=a.data,c=a.statusText,"OK"===c&&"success"===s.status){e.next=17;break}throw new Error(s.message);case 17:t.isProcessing=!1,localStorage.setItem("token",s.token),t.$store.commit("setCurrentUser",s.user),t.$router.push("/admin/tweets"),e.next=28;break;case 23:e.prev=23,e.t0=e["catch"](0),t.isProcessing=!1,t.password.text="",o["a"].fire({icon:"error",title:e.t0.message});case 28:case"end":return e.stop()}}),e,null,[[0,23]])})))()}}},u=c,l=r("2877"),d=Object(l["a"])(u,n,a,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-6b6d363c-legacy.1cdbbb9d.js.map
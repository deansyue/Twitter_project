(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73eac751"],{"4cce":function(e,t,r){"use strict";r("b0c0");var a=r("2fa3"),s=function(){return localStorage.getItem("token")};t["a"]={getUser:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t),{headers:{Authorization:"Bearer ".concat(s())}})},getUserTweets:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserReplies:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserLikes:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/likes"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowers:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/followers"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowings:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/followings"),{headers:{Authorization:"Bearer ".concat(s())}})},editInformation:function(e){var t=e.id,r=e.formData;return a["b"].put("api/users/".concat(t),r,{headers:{Authorization:"Bearer ".concat(s())}})},signEdit:function(e){var t=e.userId,r=e.account,i=e.name,n=e.email,o=e.password,c=e.checkPassword;return a["b"].put("api/users/".concat(t,"/edit"),{account:r,name:i,email:n,password:o,checkPassword:c},{headers:{Authorization:"Bearer ".concat(s())}})},addFollow:function(e){var t=e.id;return a["b"].post("/api/followships",{id:t},{headers:{Authorization:"Bearer ".concat(s())}})},deleteFollow:function(e){var t=e.followingId;return a["b"].delete("api/followships/".concat(t),{headers:{Authorization:"Bearer ".concat(s())}})},getTopUser:function(){return a["b"].get("api/users/top",{headers:{Authorization:"Bearer ".concat(s())}})}}},"5c9c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"signup-wrapper"},[r("img",{staticClass:"logo-big",attrs:{alt:""}}),r("h2",[e._v("建立你的帳號")]),r("signEditing",{attrs:{pageNow:e.pageNow}}),r("div",{staticClass:"cancel-wrapper"},[r("router-link",{staticClass:"link",attrs:{to:"/signin"}},[e._v(" 取消 ")])],1)],1)},s=[],i=r("b96a"),n={components:{signEditing:i["a"]},data:function(){return{pageNow:!1}}},o=n,c=r("2877"),u=Object(c["a"])(o,a,s,!1,null,null,null);t["default"]=u.exports},b96a:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"signEditing-wrapper"},[r("div",{staticClass:"form-wrapper"},[r("form",{attrs:{id:"signEditingForm"}},[r("label",{class:["label",{isInvalid:e.account.isInvalid}],attrs:{for:""}},[e._v(" 帳號 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.account.text,expression:"account.text",modifiers:{trim:!0}}],attrs:{name:"account",type:"text"},domProps:{value:e.account.text},on:{input:function(t){t.target.composing||e.$set(e.account,"text",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[e._v(e._s(e.worLimitMessage(e.account)))]),r("h5",[e._v(e._s(e.wordLimitCount(e.account)))])]),r("label",{class:["label",{isInvalid:e.name.isInvalid}],attrs:{for:""}},[e._v(" 名稱 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name.text,expression:"name.text",modifiers:{trim:!0}}],attrs:{name:"name",type:"text"},domProps:{value:e.name.text},on:{input:function(t){t.target.composing||e.$set(e.name,"text",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[e._v(e._s(e.worLimitMessage(e.name)))]),r("h5",[e._v(e._s(e.wordLimitCount(e.name)))])]),r("label",{class:["label",{isInvalid:e.email.isInvalid}],attrs:{for:""}},[e._v(" email "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email.text,expression:"email.text",modifiers:{trim:!0}}],attrs:{name:"email",type:"text"},domProps:{value:e.email.text},on:{input:function(t){t.target.composing||e.$set(e.email,"text",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[e._v(e._s(e.worLimitMessage(e.email)))]),r("h5",[e._v(e._s(e.wordLimitCount(e.email)))])]),r("label",{class:["label",{isInvalid:e.password.isInvalid}],attrs:{for:""}},[e._v(" 密碼 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password.text,expression:"password.text",modifiers:{trim:!0}}],attrs:{name:"password",type:"password",autocomplete:"off"},domProps:{value:e.password.text},on:{input:function(t){t.target.composing||e.$set(e.password,"text",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[e._v(e._s(e.worLimitMessage(e.password)))]),r("h5",[e._v(e._s(e.wordLimitCount(e.password)))])]),r("label",{class:["label",{isInvalid:e.passwordCheck.isInvalid}],attrs:{for:""}},[e._v(" 密碼確認 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.passwordCheck.text,expression:"passwordCheck.text",modifiers:{trim:!0}}],attrs:{name:"passwordCheck",type:"password",autocomplete:"off"},domProps:{value:e.passwordCheck.text},on:{input:function(t){t.target.composing||e.$set(e.passwordCheck,"text",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[e._v(e._s(e.worLimitMessage(e.passwordCheck)))]),r("h5",[e._v(e._s(e.wordLimitCount(e.passwordCheck)))])]),e.pageNow?r("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:e.isProcessing},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleEditSubmit(e.currentUser.id)}}},[e._v(" 儲存 ")]):r("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:e.isProcessing},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSignUpSubmit.apply(null,arguments)}}},[e._v(" 註冊 ")])])])])},s=[],i=r("1da1"),n=(r("96cf"),r("b0c0"),r("d9e2"),r("2fa3")),o=r("7696"),c=r("4cce"),u={props:{currentUser:{type:Object,default:function(){return{id:"",account:"",name:"",email:"",password:""}}},pageNow:{type:Boolean,require:!0}},data:function(){return{account:{text:"",isInvalid:!1},password:{text:"",isInvalid:!1},name:{text:"",isInvalid:!1},email:{text:"",isInvalid:!1},passwordCheck:{text:"",isInvalid:!1},isProcessing:!1}},computed:{worLimitMessage:function(){return function(e){return e.text.length>50?(e.isInvalid=!0,"字數超過上限！"):(e.isInvalid=!1,"")}},wordLimitCount:function(){return function(e){return e.text.length<1?"":e.text.length+"/50"}}},created:function(){this.fetchUser()},methods:{fetchUser:function(){this.account.text=this.currentUser.account,this.name.text=this.currentUser.name,this.email.text=this.currentUser.email},handleSignUpSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s,i,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.account.text,a=e.name.text,s=e.email.text,i=e.password.text,c=e.passwordCheck.text,r&&a&&s&&i&&c){t.next=10;break}return t.abrupt("return",n["a"].fire({icon:"error",title:"尚有未填寫欄位"}));case 10:if(i===c){t.next=14;break}return t.abrupt("return",n["a"].fire({icon:"error",title:"密碼確認與密碼不同"}));case 14:if(!(r.length>50||a.length>50||s.length>50||i.length>50||c.length>50)){t.next=16;break}return t.abrupt("return",n["a"].fire({icon:"error",title:"字數超過上限"}));case 16:return e.isProcessing=!0,t.next=19,o["a"].SignUp({account:r,name:a,email:s,password:i,checkPassword:c});case 19:if(u=t.sent,l=u.data,"success"===l.status){t.next=23;break}throw new Error(l.message);case 23:e.isProcessing=!1,n["a"].fire({icon:"success",title:"註冊成功"}),e.$router.push("/signin"),t.next=32;break;case 28:t.prev=28,t.t0=t["catch"](0),e.isProcessing=!1,n["a"].fire({icon:"error",title:t.t0.message});case 32:case"end":return t.stop()}}),t,null,[[0,28]])})))()},handleEditSubmit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,o,u,l,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,a=t.account.text,s=t.name.text,i=t.email.text,o=t.password.text,u=t.passwordCheck.text,a&&s&&i&&o&&u){r.next=10;break}return r.abrupt("return",n["a"].fire({icon:"error",title:"尚有未填寫欄位"}));case 10:if(o===u){r.next=14;break}return r.abrupt("return",n["a"].fire({icon:"error",title:"密碼確認與密碼不同"}));case 14:if(!(a.length>50||s.length>50||i.length>50||o.length>50||u.length>50)){r.next=16;break}return r.abrupt("return",n["a"].fire({icon:"error",title:"字數超過上限"}));case 16:return t.isProcessing=!0,r.next=19,c["a"].signEdit({userId:e,account:a,name:s,email:i,password:o,checkPassword:u});case 19:if(l=r.sent,d=l.data,"success"===d.status){r.next=23;break}throw new Error(d.message);case 23:t.$store.commit("setCurrentUser",d.user),t.isProcessing=!1,n["a"].fire({icon:"success",title:"修改成功"}),r.next=32;break;case 28:r.prev=28,r.t0=r["catch"](0),t.isProcessing=!1,n["a"].fire({icon:"error",title:r.t0.message});case 32:case"end":return r.stop()}}),r,null,[[0,28]])})))()}}},l=u,d=r("2877"),p=Object(d["a"])(l,a,s,!1,null,null,null);t["a"]=p.exports}}]);
//# sourceMappingURL=chunk-73eac751-legacy.e35e52a5.js.map
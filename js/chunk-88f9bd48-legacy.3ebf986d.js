(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88f9bd48"],{"4cce":function(e,t,r){"use strict";r("b0c0");var a=r("2fa3"),s=function(){return localStorage.getItem("token")};t["a"]={getUser:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t),{headers:{Authorization:"Bearer ".concat(s())}})},getUserTweets:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserReplies:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserLikes:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/likes"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowers:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/followers"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowings:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/followings"),{headers:{Authorization:"Bearer ".concat(s())}})},editInformation:function(e){var t=e.id,r=e.formData;return a["b"].put("api/users/".concat(t),r,{headers:{Authorization:"Bearer ".concat(s())}})},signEdit:function(e){var t=e.userId,r=e.account,o=e.name,n=e.email,i=e.password,c=e.checkPassword;return a["b"].put("api/users/".concat(t,"/edit"),{account:r,name:o,email:n,password:i,checkPassword:c},{headers:{Authorization:"Bearer ".concat(s())}})},addFollow:function(e){var t=e.id;return a["b"].post("/api/followships",{id:t},{headers:{Authorization:"Bearer ".concat(s())}})},deleteFollow:function(e){var t=e.followingId;return a["b"].delete("api/followships/".concat(t),{headers:{Authorization:"Bearer ".concat(s())}})},getTopUser:function(){return a["b"].get("api/users/top",{headers:{Authorization:"Bearer ".concat(s())}})}}},"5b5f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"followship-wrapper"},[r("ul",{staticClass:"followship-tabs"},[r("li",{staticClass:"followship-tab"},[r("router-link",{attrs:{to:{name:"followers",params:{id:e.paramsId}}}},[e._v(" 追隨者 ")])],1),r("li",{staticClass:"followship-tab"},[r("router-link",{attrs:{to:{name:"followings",params:{id:e.paramsId}}}},[e._v(" 正在追隨 ")])],1)]),e.isLoading?r("img",{staticClass:"spinner"}):e._l(e.followCards,(function(t){return r("div",{key:t.id,staticClass:"userFollowCards"},[r("div",{staticClass:"userFollowCards-left avatar"},[r("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(t.avatar)}})]),r("div",{staticClass:"userFollowCards-right"},[t.isFollowed?r("button",{directives:[{name:"show",rawName:"v-show",value:e.currentUser.id!==t.followingId,expression:"currentUser.id !== followCard.followingId"}],staticClass:"btn active",attrs:{disabled:e.isProcessing},on:{click:function(r){return e.deleteFollow(t.followingId)}}},[e._v("正在跟隨")]):r("button",{directives:[{name:"show",rawName:"v-show",value:e.currentUser.id!==t.followingId,expression:"currentUser.id !== followCard.followingId"}],staticClass:"btn",attrs:{disabled:e.isProcessing},on:{click:function(r){return e.addFollow(t.followingId)}}},[e._v("跟隨")]),r("h5",{staticClass:"name"},[e._v(e._s(t.name))]),r("h5",{staticClass:"account"},[e._v(e._s(e._f("accountTag")(t.account)))]),r("p",[e._v(e._s(t.introduction))])])])}))],2)},s=[],o=r("2909"),n=r("1da1"),i=r("5530"),c=(r("96cf"),r("d9e2"),r("d81d"),r("a9e3"),r("4cce")),l=r("2f62"),u=r("2fa3"),d=r("2708"),f={mixins:[d["a"],d["b"]],computed:Object(i["a"])({},Object(l["b"])(["currentUser"])),data:function(){return{paramsId:0,followCards:[],isLoading:!1,isProcessing:!1}},methods:{fetchFollowCard:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,c["a"].getFollowings({userId:e});case 4:if(a=r.sent,s=a.statusText,n=a.data,t.isLoading=!1,"OK"===s){r.next=10;break}throw new Error;case 10:t.followCards=Object(o["a"])(n),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isLoading=!1,u["a"].fire({icon:"error",title:r.t0.message});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},addFollow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,c["a"].addFollow({id:e});case 4:if(a=r.sent,s=a.data,t.isProcessing=!1,"success"===s.status){r.next=9;break}throw new Error;case 9:u["a"].fire({icon:"success",title:s.message}),t.followCards=t.followCards.map((function(t){return t.followingId!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!0})})),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,u["a"].fire({icon:"error",title:r.t0.message});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},deleteFollow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,c["a"].deleteFollow({followingId:e});case 4:if(a=r.sent,s=a.data,"success"===s.status){r.next=8;break}throw new Error;case 8:t.isProcessing=!1,u["a"].fire({icon:"success",title:s.message}),t.followCards=t.followCards.map((function(t){return t.followingId!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!1})})),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,u["a"].fire({icon:"error",title:"無法進行追蹤，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()}},created:function(){var e=this.$route.params.id;this.paramsId=Number(e),this.fetchFollowCard(this.paramsId)},beforeRouteUpdate:function(){var e=this.$route.params.id;this.paramsId=Number(e),this.fetchFollowCard(this.paramsId)}},w=f,p=r("2877"),h=Object(p["a"])(w,a,s,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-88f9bd48-legacy.3ebf986d.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c2910a2"],{"4cce":function(t,e,s){"use strict";var a=s("2fa3");const i=()=>localStorage.getItem("token");e["a"]={getUser({userId:t}){return a["b"].get("api/users/"+t,{headers:{Authorization:"Bearer "+i()}})},getUserTweets({userId:t}){return a["b"].get(`api/users/${t}/tweets`,{headers:{Authorization:"Bearer "+i()}})},getUserReplies({userId:t}){return a["b"].get(`api/users/${t}/replied_tweets`,{headers:{Authorization:"Bearer "+i()}})},getUserLikes({userId:t}){return a["b"].get(`api/users/${t}/likes`,{headers:{Authorization:"Bearer "+i()}})},getFollowers({userId:t}){return a["b"].get(`api/users/${t}/followers`,{headers:{Authorization:"Bearer "+i()}})},getFollowings({userId:t}){return a["b"].get(`api/users/${t}/followings`,{headers:{Authorization:"Bearer "+i()}})},editInformation({id:t,formData:e}){return a["b"].put("api/users/"+t,e,{headers:{Authorization:"Bearer "+i()}})},signEdit({userId:t,account:e,name:s,email:r,password:n,checkPassword:o}){return a["b"].put(`api/users/${t}/edit`,{account:e,name:s,email:r,password:n,checkPassword:o},{headers:{Authorization:"Bearer "+i()}})},addFollow({id:t}){return a["b"].post("/api/followships",{id:t},{headers:{Authorization:"Bearer "+i()}})},deleteFollow({followingId:t}){return a["b"].delete("api/followships/"+t,{headers:{Authorization:"Bearer "+i()}})},getTopUser(){return a["b"].get("api/users/top",{headers:{Authorization:"Bearer "+i()}})}}},"4ef5":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setting-wrapper"},[s("div",{staticClass:"leftContainer"},[s("NavBar")],1),s("div",{staticClass:"rightContainer"},[s("div",{staticClass:"title"},[t._v("帳戶設定")]),s("signEditing",{attrs:{currentUser:t.currentUser,pageNow:t.pageNow}})],1)])},i=[],r=s("d000"),n=s("b96a"),o=s("2f62"),l={components:{NavBar:r["a"],signEditing:n["a"]},data(){return{pageNow:!0}},computed:{...Object(o["b"])(["currentUser"])}},c=l,u=s("2877"),d=Object(u["a"])(c,a,i,!1,null,null,null);e["default"]=d.exports},b96a:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signEditing-wrapper"},[s("div",{staticClass:"form-wrapper"},[s("form",{attrs:{id:"signEditingForm"}},[s("label",{class:["label",{isInvalid:t.account.isInvalid}],attrs:{for:""}},[t._v(" 帳號 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.text,expression:"account.text",modifiers:{trim:!0}}],attrs:{name:"account",type:"text"},domProps:{value:t.account.text},on:{input:function(e){e.target.composing||t.$set(t.account,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.account)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.account)))])]),s("label",{class:["label",{isInvalid:t.name.isInvalid}],attrs:{for:""}},[t._v(" 名稱 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name.text,expression:"name.text",modifiers:{trim:!0}}],attrs:{name:"name",type:"text"},domProps:{value:t.name.text},on:{input:function(e){e.target.composing||t.$set(t.name,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.name)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.name)))])]),s("label",{class:["label",{isInvalid:t.email.isInvalid}],attrs:{for:""}},[t._v(" email "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email.text,expression:"email.text",modifiers:{trim:!0}}],attrs:{name:"email",type:"text"},domProps:{value:t.email.text},on:{input:function(e){e.target.composing||t.$set(t.email,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.email)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.email)))])]),s("label",{class:["label",{isInvalid:t.password.isInvalid}],attrs:{for:""}},[t._v(" 密碼 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password.text,expression:"password.text",modifiers:{trim:!0}}],attrs:{name:"password",type:"password",autocomplete:"off"},domProps:{value:t.password.text},on:{input:function(e){e.target.composing||t.$set(t.password,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.password)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.password)))])]),s("label",{class:["label",{isInvalid:t.passwordCheck.isInvalid}],attrs:{for:""}},[t._v(" 密碼確認 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.passwordCheck.text,expression:"passwordCheck.text",modifiers:{trim:!0}}],attrs:{name:"passwordCheck",type:"password",autocomplete:"off"},domProps:{value:t.passwordCheck.text},on:{input:function(e){e.target.composing||t.$set(t.passwordCheck,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.passwordCheck)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.passwordCheck)))])]),t.pageNow?s("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleEditSubmit(t.currentUser.id)}}},[t._v(" 儲存 ")]):s("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSignUpSubmit.apply(null,arguments)}}},[t._v(" 註冊 ")])])])])},i=[],r=(s("d9e2"),s("2fa3")),n=s("7696"),o=s("4cce"),l={props:{currentUser:{type:Object,default:()=>({id:"",account:"",name:"",email:"",password:""})},pageNow:{type:Boolean,require:!0}},data(){return{account:{text:"",isInvalid:!1},password:{text:"",isInvalid:!1},name:{text:"",isInvalid:!1},email:{text:"",isInvalid:!1},passwordCheck:{text:"",isInvalid:!1},isProcessing:!1}},computed:{worLimitMessage(){return t=>t.text.length>50?(t.isInvalid=!0,"字數超過上限！"):(t.isInvalid=!1,"")},wordLimitCount(){return t=>t.text.length<1?"":t.text.length+"/50"}},created(){this.fetchUser()},methods:{fetchUser(){this.account.text=this.currentUser.account,this.name.text=this.currentUser.name,this.email.text=this.currentUser.email},async handleSignUpSubmit(){try{const t=this.account.text,e=this.name.text,s=this.email.text,a=this.password.text,i=this.passwordCheck.text;if(!(t&&e&&s&&a&&i))return r["a"].fire({icon:"error",title:"尚有未填寫欄位"});if(a!==i)return r["a"].fire({icon:"error",title:"密碼確認與密碼不同"});if(t.length>50||e.length>50||s.length>50||a.length>50||i.length>50)return r["a"].fire({icon:"error",title:"字數超過上限"});this.isProcessing=!0;const{data:o}=await n["a"].SignUp({account:t,name:e,email:s,password:a,checkPassword:i});if("success"!==o.status)throw new Error(o.message);this.isProcessing=!1,r["a"].fire({icon:"success",title:"註冊成功"}),this.$router.push("/signin")}catch(t){this.isProcessing=!1,r["a"].fire({icon:"error",title:t.message})}},async handleEditSubmit(t){try{const e=this.account.text,s=this.name.text,a=this.email.text,i=this.password.text,n=this.passwordCheck.text;if(!(e&&s&&a&&i&&n))return r["a"].fire({icon:"error",title:"尚有未填寫欄位"});if(i!==n)return r["a"].fire({icon:"error",title:"密碼確認與密碼不同"});if(e.length>50||s.length>50||a.length>50||i.length>50||n.length>50)return r["a"].fire({icon:"error",title:"字數超過上限"});this.isProcessing=!0;const{data:l}=await o["a"].signEdit({userId:t,account:e,name:s,email:a,password:i,checkPassword:n});if("success"!==l.status)throw new Error(l.message);this.$store.commit("setCurrentUser",l.user),this.isProcessing=!1,r["a"].fire({icon:"success",title:"修改成功"})}catch(e){this.isProcessing=!1,r["a"].fire({icon:"error",title:e.message})}}}},c=l,u=s("2877"),d=Object(u["a"])(c,a,i,!1,null,null,null);e["a"]=d.exports},d000:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navBar-wrapper"},[s("div",{staticClass:"container"},[s("div",{staticClass:"logoContainer"},[s("router-link",{attrs:{to:"/users/main"}},[s("img",{staticClass:"logo",attrs:{alt:""}})])],1),s("div",{staticClass:"content"},[s("div",{staticClass:"homeTab"},[s("router-link",{staticClass:"navItem",attrs:{to:"/users/main"}},[s("div",{staticClass:"icon"},[s("img",{staticClass:"home",attrs:{alt:""}})]),t._v(" 首頁 ")])],1),s("div",{staticClass:"selfTab"},[s("router-link",{staticClass:"navItem",attrs:{to:"/users/self/tweet"}},[s("div",{staticClass:"icon"},[s("img",{staticClass:"person",attrs:{alt:""}})]),t._v(" 個人資料 ")])],1),s("div",{staticClass:"settingTab"},[s("router-link",{staticClass:"navItem",attrs:{to:"/setting"}},[s("div",{staticClass:"icon"},[s("img",{staticClass:"setting",attrs:{alt:""}})]),t._v(" 設定 ")])],1)]),s("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showNewCreateModal()}}},[t._v(" 推文 ")]),s("div",{staticClass:"logoutTab"},[s("button",{staticClass:"logoutButton",on:{click:function(e){return t.logout()}}},[t._m(0),t._v(" 登出 ")])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon"},[s("img",{staticClass:"logout",attrs:{alt:""}})])}],r=s("2f62"),n={computed:{...Object(r["b"])(["currentUser","isAuthenticated"])},methods:{logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")},showNewCreateModal(){this.$modal.show("tweetCreate")}}},o=n,l=s("2877"),c=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-6c2910a2.799c0a44.js.map
{"version":3,"sources":["webpack:///./src/apis/admin.js","webpack:///./src/views/AdminSignIn.vue?8655","webpack:///src/views/AdminSignIn.vue","webpack:///./src/views/AdminSignIn.vue?7c05","webpack:///./src/views/AdminSignIn.vue"],"names":["getToken","localStorage","getItem","adminSignIn","account","password","apiHelper","post","deleteTweet","tweetId","delete","headers","Authorization","getAdminUsers","get","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","preventDefault","stopPropagation","handleFormSubmit","apply","arguments","class","isInvalid","directives","name","rawName","value","expression","modifiers","domProps","target","composing","$set","trim","$forceUpdate","_s","worLimitMessage","wordLimitCount","isProcessing","staticRenderFns","data","text","computed","input","length","methods","Toast","icon","title","adminAPI","statusText","component"],"mappings":"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","file":"js/chunk-6b6d363c-legacy.1cdbbb9d.js","sourcesContent":["import { apiHelper } from './../utils/helpers'\nconst getToken = () => localStorage.getItem('token')\n\nexport default {\n  // 管理員登入\n  adminSignIn({ account, password }) {\n    return apiHelper.post(`api/admin/signin`, { \n      account,\n      password\n     })\n  },\n   // 刪除使用者的推文\n   deleteTweet({ tweetId }) {\n    return apiHelper.delete(`api/admin/tweets/${tweetId}`, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  },\n  // 取得管理員可見的所有用戶清單\n  getAdminUsers() {\n    return apiHelper.get('api/admin/users', {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  }\n}\n\n\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"signin-wrapper\"},[_c('img',{staticClass:\"logo-big\",attrs:{\"alt\":\"\"}}),_c('h2',[_vm._v(\"後台登入\")]),_c('div',{staticClass:\"form-wrapper\"},[_c('form',{attrs:{\"id\":\"signInForm\"},on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleFormSubmit.apply(null, arguments)}}},[_c('label',{class:['label', { isInvalid: _vm.account.isInvalid }],attrs:{\"for\":\"\"}},[_vm._v(\" 帳號 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.account.text),expression:\"account.text\",modifiers:{\"trim\":true}}],attrs:{\"name\":\"account\",\"type\":\"text\"},domProps:{\"value\":(_vm.account.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.account, \"text\", $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"wordLimit-wrapper\"},[_c('h5',[_vm._v(_vm._s(_vm.worLimitMessage(_vm.account)))]),_c('h5',[_vm._v(_vm._s(_vm.wordLimitCount(_vm.account)))])]),_c('label',{class:['label', { isInvalid: _vm.password.isInvalid }],attrs:{\"for\":\"\"}},[_vm._v(\" 密碼 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.password.text),expression:\"password.text\",modifiers:{\"trim\":true}}],attrs:{\"name\":\"password\",\"type\":\"password\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.password.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.password, \"text\", $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"wordLimit-wrapper\"},[_c('h5',[_vm._v(_vm._s(_vm.worLimitMessage(_vm.password)))]),_c('h5',[_vm._v(_vm._s(_vm.wordLimitCount(_vm.password)))])]),_c('button',{staticClass:\"btn active\",attrs:{\"form\":\"signInForm\",\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\" 登入 \")])])]),_c('div',{staticClass:\"link-wrapper\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":\"/signin\"}},[_vm._v(\" 前台登入 \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"signin-wrapper\">\n    <img class=\"logo-big\" alt=\"\">\n    <h2>後台登入</h2>\n    <div class=\"form-wrapper\">\n      <form id=\"signInForm\" @submit.prevent.stop=\"handleFormSubmit\">\n          <!-- 輸入框 -->\n          <label for=\"\"\n            :class=\"['label', { isInvalid: account.isInvalid }]\"\n          >\n            帳號\n            <input v-model.trim=\"account.text\" name=\"account\" type=\"text\">\n          </label>\n          <div class=\"wordLimit-wrapper\">\n            <h5>{{ worLimitMessage(account) }}</h5>\n            <h5>{{ wordLimitCount(account) }}</h5>\n          </div>\n          <!-- 輸入框 -->\n          <label for=\"\" :class=\"['label', { isInvalid: password.isInvalid }]\">\n            密碼\n            <input\n              v-model.trim=\"password.text\"\n              name=\"password\"\n              type=\"password\"\n              autocomplete=\"off\"\n            />\n          </label>\n          <div class=\"wordLimit-wrapper\">\n            <h5>{{ worLimitMessage(password) }}</h5>\n            <h5>{{ wordLimitCount(password) }}</h5>\n          </div>\n          <button\n           form=\"signInForm\"\n           type=\"submit\"\n           class=\"btn active\"\n           :disabled=\"isProcessing\"\n        >\n            登入\n          </button>\n      </form>\n    </div>\n\n    <div class=\"link-wrapper\">\n      <router-link to=\"/signin\" class=\"link\">\n        前台登入\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport adminAPI from \"../apis/admin\";\nimport { Toast } from \"../utils/helpers\";\n\nexport default {\n   data() {\n    return {\n      // input 一個輸入框為一組\n      account: {\n        text: \"\",\n        isInvalid: false,\n      },\n      password: {\n        text: \"\",\n        isInvalid: false,\n      },\n      isProcessing: false,\n    };\n  },\n  computed: {\n    worLimitMessage() {\n      return (input) => {\n        if (input.text.length > 50) {\n          input.isInvalid = true;\n          return \"字數超過上限！\";\n        } else {\n          input.isInvalid = false;\n          return \"\";\n        }\n      };\n    },\n    wordLimitCount() {\n      // 計算帶入input的字數\n      return (input) => {\n        if (input.text.length < 1) return \"\";\n        else return input.text.length + \"/50\";\n      };\n    },\n  },\n methods: {\n    async handleFormSubmit() {\n      try {\n        const account = this.account.text;\n        const password = this.password.text;\n        if (!account || !password)\n          return Toast.fire({\n            icon: \"error\",\n            title: \"帳號密碼不可空白\",\n          });\n        else if (account.length > 50 || password.length > 50)\n          return Toast.fire({\n            icon: \"error\",\n            title: \"字數超過上限\",\n          });\n        // 當前端檢查過關：\n        this.isProcessing = true;\n        const { data, statusText } = await adminAPI.adminSignIn({\n          account,\n          password\n        });\n        // 當串接失敗\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        // 當串接成功：\n        this.isProcessing = false;\n        localStorage.setItem('token', data.token)\n        this.$store.commit('setCurrentUser', data.user)\n        this.$router.push('/admin/tweets')\n\n      } catch (error) {\n        this.isProcessing = false;\n        this.password.text = \"\";\n        Toast.fire({\n          icon: \"error\",\n          title: error.message,\n        });\n      }\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminSignIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminSignIn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminSignIn.vue?vue&type=template&id=e229aeb0&\"\nimport script from \"./AdminSignIn.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminSignIn.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
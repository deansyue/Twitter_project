(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c2910a2"],{"4cce":function(t,e,r){"use strict";r("b0c0");var a=r("2fa3"),s=function(){return localStorage.getItem("token")};e["a"]={getUser:function(t){var e=t.userId;return a["b"].get("api/users/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})},getUserTweets:function(t){var e=t.userId;return a["b"].get("api/users/".concat(e,"/tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserReplies:function(t){var e=t.userId;return a["b"].get("api/users/".concat(e,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserLikes:function(t){var e=t.userId;return a["b"].get("api/users/".concat(e,"/likes"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowers:function(t){var e=t.userId;return a["b"].get("api/users/".concat(e,"/followers"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowings:function(t){var e=t.userId;return a["b"].get("api/users/".concat(e,"/followings"),{headers:{Authorization:"Bearer ".concat(s())}})},editInformation:function(t){var e=t.id,r=t.formData;return a["b"].put("api/users/".concat(e),r,{headers:{Authorization:"Bearer ".concat(s())}})},signEdit:function(t){var e=t.userId,r=t.account,i=t.name,n=t.email,o=t.password,c=t.checkPassword;return a["b"].put("api/users/".concat(e,"/edit"),{account:r,name:i,email:n,password:o,checkPassword:c},{headers:{Authorization:"Bearer ".concat(s())}})},addFollow:function(t){var e=t.id;return a["b"].post("/api/followships",{id:e},{headers:{Authorization:"Bearer ".concat(s())}})},deleteFollow:function(t){var e=t.followingId;return a["b"].delete("api/followships/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})},getTopUser:function(){return a["b"].get("api/users/top",{headers:{Authorization:"Bearer ".concat(s())}})}}},"4ef5":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"setting-wrapper"},[r("div",{staticClass:"leftContainer"},[r("NavBar")],1),r("div",{staticClass:"rightContainer"},[r("div",{staticClass:"title"},[t._v("帳戶設定")]),r("signEditing",{attrs:{currentUser:t.currentUser,pageNow:t.pageNow}})],1)])},s=[],i=r("5530"),n=r("d000"),o=r("b96a"),c=r("2f62"),u={components:{NavBar:n["a"],signEditing:o["a"]},data:function(){return{pageNow:!0}},computed:Object(i["a"])({},Object(c["b"])(["currentUser"]))},l=u,d=r("2877"),m=Object(d["a"])(l,a,s,!1,null,null,null);e["default"]=m.exports},b96a:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"signEditing-wrapper"},[r("div",{staticClass:"form-wrapper"},[r("form",{attrs:{id:"signEditingForm"}},[r("label",{class:["label",{isInvalid:t.account.isInvalid}],attrs:{for:""}},[t._v(" 帳號 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.text,expression:"account.text",modifiers:{trim:!0}}],attrs:{name:"account",type:"text"},domProps:{value:t.account.text},on:{input:function(e){e.target.composing||t.$set(t.account,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[t._v(t._s(t.worLimitMessage(t.account)))]),r("h5",[t._v(t._s(t.wordLimitCount(t.account)))])]),r("label",{class:["label",{isInvalid:t.name.isInvalid}],attrs:{for:""}},[t._v(" 名稱 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name.text,expression:"name.text",modifiers:{trim:!0}}],attrs:{name:"name",type:"text"},domProps:{value:t.name.text},on:{input:function(e){e.target.composing||t.$set(t.name,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[t._v(t._s(t.worLimitMessage(t.name)))]),r("h5",[t._v(t._s(t.wordLimitCount(t.name)))])]),r("label",{class:["label",{isInvalid:t.email.isInvalid}],attrs:{for:""}},[t._v(" email "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email.text,expression:"email.text",modifiers:{trim:!0}}],attrs:{name:"email",type:"text"},domProps:{value:t.email.text},on:{input:function(e){e.target.composing||t.$set(t.email,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[t._v(t._s(t.worLimitMessage(t.email)))]),r("h5",[t._v(t._s(t.wordLimitCount(t.email)))])]),r("label",{class:["label",{isInvalid:t.password.isInvalid}],attrs:{for:""}},[t._v(" 密碼 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password.text,expression:"password.text",modifiers:{trim:!0}}],attrs:{name:"password",type:"password",autocomplete:"off"},domProps:{value:t.password.text},on:{input:function(e){e.target.composing||t.$set(t.password,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[t._v(t._s(t.worLimitMessage(t.password)))]),r("h5",[t._v(t._s(t.wordLimitCount(t.password)))])]),r("label",{class:["label",{isInvalid:t.passwordCheck.isInvalid}],attrs:{for:""}},[t._v(" 密碼確認 "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.passwordCheck.text,expression:"passwordCheck.text",modifiers:{trim:!0}}],attrs:{name:"passwordCheck",type:"password",autocomplete:"off"},domProps:{value:t.passwordCheck.text},on:{input:function(e){e.target.composing||t.$set(t.passwordCheck,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"wordLimit-wrapper"},[r("h5",[t._v(t._s(t.worLimitMessage(t.passwordCheck)))]),r("h5",[t._v(t._s(t.wordLimitCount(t.passwordCheck)))])]),t.pageNow?r("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleEditSubmit(t.currentUser.id)}}},[t._v(" 儲存 ")]):r("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSignUpSubmit.apply(null,arguments)}}},[t._v(" 註冊 ")])])])])},s=[],i=r("1da1"),n=(r("96cf"),r("b0c0"),r("d9e2"),r("2fa3")),o=r("7696"),c=r("4cce"),u={props:{currentUser:{type:Object,default:function(){return{id:"",account:"",name:"",email:"",password:""}}},pageNow:{type:Boolean,require:!0}},data:function(){return{account:{text:"",isInvalid:!1},password:{text:"",isInvalid:!1},name:{text:"",isInvalid:!1},email:{text:"",isInvalid:!1},passwordCheck:{text:"",isInvalid:!1},isProcessing:!1}},computed:{worLimitMessage:function(){return function(t){return t.text.length>50?(t.isInvalid=!0,"字數超過上限！"):(t.isInvalid=!1,"")}},wordLimitCount:function(){return function(t){return t.text.length<1?"":t.text.length+"/50"}}},created:function(){this.fetchUser()},methods:{fetchUser:function(){this.account.text=this.currentUser.account,this.name.text=this.currentUser.name,this.email.text=this.currentUser.email},handleSignUpSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,s,i,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.account.text,a=t.name.text,s=t.email.text,i=t.password.text,c=t.passwordCheck.text,r&&a&&s&&i&&c){e.next=10;break}return e.abrupt("return",n["a"].fire({icon:"error",title:"尚有未填寫欄位"}));case 10:if(i===c){e.next=14;break}return e.abrupt("return",n["a"].fire({icon:"error",title:"密碼確認與密碼不同"}));case 14:if(!(r.length>50||a.length>50||s.length>50||i.length>50||c.length>50)){e.next=16;break}return e.abrupt("return",n["a"].fire({icon:"error",title:"字數超過上限"}));case 16:return t.isProcessing=!0,e.next=19,o["a"].SignUp({account:r,name:a,email:s,password:i,checkPassword:c});case 19:if(u=e.sent,l=u.data,"success"===l.status){e.next=23;break}throw new Error(l.message);case 23:t.isProcessing=!1,n["a"].fire({icon:"success",title:"註冊成功"}),t.$router.push("/signin"),e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](0),t.isProcessing=!1,n["a"].fire({icon:"error",title:e.t0.message});case 32:case"end":return e.stop()}}),e,null,[[0,28]])})))()},handleEditSubmit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,o,u,l,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,a=e.account.text,s=e.name.text,i=e.email.text,o=e.password.text,u=e.passwordCheck.text,a&&s&&i&&o&&u){r.next=10;break}return r.abrupt("return",n["a"].fire({icon:"error",title:"尚有未填寫欄位"}));case 10:if(o===u){r.next=14;break}return r.abrupt("return",n["a"].fire({icon:"error",title:"密碼確認與密碼不同"}));case 14:if(!(a.length>50||s.length>50||i.length>50||o.length>50||u.length>50)){r.next=16;break}return r.abrupt("return",n["a"].fire({icon:"error",title:"字數超過上限"}));case 16:return e.isProcessing=!0,r.next=19,c["a"].signEdit({userId:t,account:a,name:s,email:i,password:o,checkPassword:u});case 19:if(l=r.sent,d=l.data,"success"===d.status){r.next=23;break}throw new Error(d.message);case 23:e.$store.commit("setCurrentUser",d.user),e.isProcessing=!1,n["a"].fire({icon:"success",title:"修改成功"}),r.next=32;break;case 28:r.prev=28,r.t0=r["catch"](0),e.isProcessing=!1,n["a"].fire({icon:"error",title:r.t0.message});case 32:case"end":return r.stop()}}),r,null,[[0,28]])})))()}}},l=u,d=r("2877"),m=Object(d["a"])(l,a,s,!1,null,null,null);e["a"]=m.exports},d000:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"navBar-wrapper"},[r("div",{staticClass:"container"},[r("div",{staticClass:"logoContainer"},[r("router-link",{attrs:{to:"/users/main"}},[r("img",{staticClass:"logo",attrs:{alt:""}})])],1),r("div",{staticClass:"content"},[r("div",{staticClass:"homeTab"},[r("router-link",{staticClass:"navItem",attrs:{to:"/users/main"}},[r("div",{staticClass:"icon"},[r("img",{staticClass:"home",attrs:{alt:""}})]),t._v(" 首頁 ")])],1),r("div",{staticClass:"selfTab"},[r("router-link",{staticClass:"navItem",attrs:{to:"/users/self/tweet"}},[r("div",{staticClass:"icon"},[r("img",{staticClass:"person",attrs:{alt:""}})]),t._v(" 個人資料 ")])],1),r("div",{staticClass:"settingTab"},[r("router-link",{staticClass:"navItem",attrs:{to:"/setting"}},[r("div",{staticClass:"icon"},[r("img",{staticClass:"setting",attrs:{alt:""}})]),t._v(" 設定 ")])],1)]),r("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showNewCreateModal()}}},[t._v(" 推文 ")]),r("div",{staticClass:"logoutTab"},[r("button",{staticClass:"logoutButton",on:{click:function(e){return t.logout()}}},[t._m(0),t._v(" 登出 ")])])])])},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"icon"},[r("img",{staticClass:"logout",attrs:{alt:""}})])}],i=r("5530"),n=r("2f62"),o={computed:Object(i["a"])({},Object(n["b"])(["currentUser","isAuthenticated"])),methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")},showNewCreateModal:function(){this.$modal.show("tweetCreate")}}},c=o,u=r("2877"),l=Object(u["a"])(c,a,s,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-6c2910a2-legacy.3d9cc361.js.map
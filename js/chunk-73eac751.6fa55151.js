(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73eac751"],{"4cce":function(t,e,s){"use strict";var r=s("2fa3");const i=()=>localStorage.getItem("token");e["a"]={getUser({userId:t}){return r["b"].get("api/users/"+t,{headers:{Authorization:"Bearer "+i()}})},getUserTweets({userId:t}){return r["b"].get(`api/users/${t}/tweets`,{headers:{Authorization:"Bearer "+i()}})},getUserReplies({userId:t}){return r["b"].get(`api/users/${t}/replied_tweets`,{headers:{Authorization:"Bearer "+i()}})},getUserLikes({userId:t}){return r["b"].get(`api/users/${t}/likes`,{headers:{Authorization:"Bearer "+i()}})},getFollowers({userId:t}){return r["b"].get(`api/users/${t}/followers`,{headers:{Authorization:"Bearer "+i()}})},getFollowings({userId:t}){return r["b"].get(`api/users/${t}/followings`,{headers:{Authorization:"Bearer "+i()}})},editInformation({id:t,formData:e}){return r["b"].put("api/users/"+t,e,{headers:{Authorization:"Bearer "+i()}})},signEdit({userId:t,account:e,name:s,email:a,password:o,checkPassword:n}){return r["b"].put(`api/users/${t}/edit`,{account:e,name:s,email:a,password:o,checkPassword:n},{headers:{Authorization:"Bearer "+i()}})},addFollow({id:t}){return r["b"].post("/api/followships",{id:t},{headers:{Authorization:"Bearer "+i()}})},deleteFollow({followingId:t}){return r["b"].delete("api/followships/"+t,{headers:{Authorization:"Bearer "+i()}})},getTopUser(){return r["b"].get("api/users/top",{headers:{Authorization:"Bearer "+i()}})}}},"5c9c":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signup-wrapper"},[s("img",{staticClass:"logo-big",attrs:{alt:""}}),s("h2",[t._v("建立你的帳號")]),s("signEditing",{attrs:{pageNow:t.pageNow}}),s("div",{staticClass:"cancel-wrapper"},[s("router-link",{staticClass:"link",attrs:{to:"/signin"}},[t._v(" 取消 ")])],1)],1)},i=[],a=s("b96a"),o={components:{signEditing:a["a"]},data(){return{pageNow:!1}}},n=o,l=s("2877"),c=Object(l["a"])(n,r,i,!1,null,null,null);e["default"]=c.exports},b96a:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signEditing-wrapper"},[s("div",{staticClass:"form-wrapper"},[s("form",{attrs:{id:"signEditingForm"}},[s("label",{class:["label",{isInvalid:t.account.isInvalid}],attrs:{for:""}},[t._v(" 帳號 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.text,expression:"account.text",modifiers:{trim:!0}}],attrs:{name:"account",type:"text"},domProps:{value:t.account.text},on:{input:function(e){e.target.composing||t.$set(t.account,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.account)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.account)))])]),s("label",{class:["label",{isInvalid:t.name.isInvalid}],attrs:{for:""}},[t._v(" 名稱 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name.text,expression:"name.text",modifiers:{trim:!0}}],attrs:{name:"name",type:"text"},domProps:{value:t.name.text},on:{input:function(e){e.target.composing||t.$set(t.name,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.name)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.name)))])]),s("label",{class:["label",{isInvalid:t.email.isInvalid}],attrs:{for:""}},[t._v(" email "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email.text,expression:"email.text",modifiers:{trim:!0}}],attrs:{name:"email",type:"text"},domProps:{value:t.email.text},on:{input:function(e){e.target.composing||t.$set(t.email,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.email)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.email)))])]),s("label",{class:["label",{isInvalid:t.password.isInvalid}],attrs:{for:""}},[t._v(" 密碼 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password.text,expression:"password.text",modifiers:{trim:!0}}],attrs:{name:"password",type:"password",autocomplete:"off"},domProps:{value:t.password.text},on:{input:function(e){e.target.composing||t.$set(t.password,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.password)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.password)))])]),s("label",{class:["label",{isInvalid:t.passwordCheck.isInvalid}],attrs:{for:""}},[t._v(" 密碼確認 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.passwordCheck.text,expression:"passwordCheck.text",modifiers:{trim:!0}}],attrs:{name:"passwordCheck",type:"password",autocomplete:"off"},domProps:{value:t.passwordCheck.text},on:{input:function(e){e.target.composing||t.$set(t.passwordCheck,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.passwordCheck)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.passwordCheck)))])]),t.pageNow?s("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleEditSubmit(t.currentUser.id)}}},[t._v(" 儲存 ")]):s("button",{staticClass:"btn active",attrs:{type:"submit",form:"signEditingForm",disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSignUpSubmit.apply(null,arguments)}}},[t._v(" 註冊 ")])])])])},i=[],a=(s("d9e2"),s("2fa3")),o=s("7696"),n=s("4cce"),l={props:{currentUser:{type:Object,default:()=>({id:"",account:"",name:"",email:"",password:""})},pageNow:{type:Boolean,require:!0}},data(){return{account:{text:"",isInvalid:!1},password:{text:"",isInvalid:!1},name:{text:"",isInvalid:!1},email:{text:"",isInvalid:!1},passwordCheck:{text:"",isInvalid:!1},isProcessing:!1}},computed:{worLimitMessage(){return t=>t.text.length>50?(t.isInvalid=!0,"字數超過上限！"):(t.isInvalid=!1,"")},wordLimitCount(){return t=>t.text.length<1?"":t.text.length+"/50"}},created(){this.fetchUser()},methods:{fetchUser(){this.account.text=this.currentUser.account,this.name.text=this.currentUser.name,this.email.text=this.currentUser.email},async handleSignUpSubmit(){try{const t=this.account.text,e=this.name.text,s=this.email.text,r=this.password.text,i=this.passwordCheck.text;if(!(t&&e&&s&&r&&i))return a["a"].fire({icon:"error",title:"尚有未填寫欄位"});if(r!==i)return a["a"].fire({icon:"error",title:"密碼確認與密碼不同"});if(t.length>50||e.length>50||s.length>50||r.length>50||i.length>50)return a["a"].fire({icon:"error",title:"字數超過上限"});this.isProcessing=!0;const{data:n}=await o["a"].SignUp({account:t,name:e,email:s,password:r,checkPassword:i});if("success"!==n.status)throw new Error(n.message);this.isProcessing=!1,a["a"].fire({icon:"success",title:"註冊成功"}),this.$router.push("/signin")}catch(t){this.isProcessing=!1,a["a"].fire({icon:"error",title:t.message})}},async handleEditSubmit(t){try{const e=this.account.text,s=this.name.text,r=this.email.text,i=this.password.text,o=this.passwordCheck.text;if(!(e&&s&&r&&i&&o))return a["a"].fire({icon:"error",title:"尚有未填寫欄位"});if(i!==o)return a["a"].fire({icon:"error",title:"密碼確認與密碼不同"});if(e.length>50||s.length>50||r.length>50||i.length>50||o.length>50)return a["a"].fire({icon:"error",title:"字數超過上限"});this.isProcessing=!0;const{data:l}=await n["a"].signEdit({userId:t,account:e,name:s,email:r,password:i,checkPassword:o});if("success"!==l.status)throw new Error(l.message);this.$store.commit("setCurrentUser",l.user),this.isProcessing=!1,a["a"].fire({icon:"success",title:"修改成功"})}catch(e){this.isProcessing=!1,a["a"].fire({icon:"error",title:e.message})}}}},c=l,u=s("2877"),d=Object(u["a"])(c,r,i,!1,null,null,null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-73eac751.6fa55151.js.map
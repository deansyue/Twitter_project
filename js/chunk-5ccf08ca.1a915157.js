(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ccf08ca"],{"4cce":function(t,s,e){"use strict";var a=e("2fa3");const r=()=>localStorage.getItem("token");s["a"]={getUser({userId:t}){return a["b"].get("api/users/"+t,{headers:{Authorization:"Bearer "+r()}})},getUserTweets({userId:t}){return a["b"].get(`api/users/${t}/tweets`,{headers:{Authorization:"Bearer "+r()}})},getUserReplies({userId:t}){return a["b"].get(`api/users/${t}/replied_tweets`,{headers:{Authorization:"Bearer "+r()}})},getUserLikes({userId:t}){return a["b"].get(`api/users/${t}/likes`,{headers:{Authorization:"Bearer "+r()}})},getFollowers({userId:t}){return a["b"].get(`api/users/${t}/followers`,{headers:{Authorization:"Bearer "+r()}})},getFollowings({userId:t}){return a["b"].get(`api/users/${t}/followings`,{headers:{Authorization:"Bearer "+r()}})},editInformation({id:t,formData:s}){return a["b"].put("api/users/"+t,s,{headers:{Authorization:"Bearer "+r()}})},signEdit({userId:t,account:s,name:e,email:i,password:o,checkPassword:n}){return a["b"].put(`api/users/${t}/edit`,{account:s,name:e,email:i,password:o,checkPassword:n},{headers:{Authorization:"Bearer "+r()}})},addFollow({id:t}){return a["b"].post("/api/followships",{id:t},{headers:{Authorization:"Bearer "+r()}})},deleteFollow({followingId:t}){return a["b"].delete("api/followships/"+t,{headers:{Authorization:"Bearer "+r()}})},getTopUser(){return a["b"].get("api/users/top",{headers:{Authorization:"Bearer "+r()}})}}},d000:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"navBar-wrapper"},[e("div",{staticClass:"container"},[e("div",{staticClass:"logoContainer"},[e("router-link",{attrs:{to:"/users/main"}},[e("img",{staticClass:"logo",attrs:{alt:""}})])],1),e("div",{staticClass:"content"},[e("div",{staticClass:"homeTab"},[e("router-link",{staticClass:"navItem",attrs:{to:"/users/main"}},[e("div",{staticClass:"icon"},[e("img",{staticClass:"home",attrs:{alt:""}})]),t._v(" 首頁 ")])],1),e("div",{staticClass:"selfTab"},[e("router-link",{staticClass:"navItem",attrs:{to:"/users/self/tweet"}},[e("div",{staticClass:"icon"},[e("img",{staticClass:"person",attrs:{alt:""}})]),t._v(" 個人資料 ")])],1),e("div",{staticClass:"settingTab"},[e("router-link",{staticClass:"navItem",attrs:{to:"/setting"}},[e("div",{staticClass:"icon"},[e("img",{staticClass:"setting",attrs:{alt:""}})]),t._v(" 設定 ")])],1)]),e("button",{staticClass:"btn",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.showNewCreateModal()}}},[t._v(" 推文 ")]),e("div",{staticClass:"logoutTab"},[e("button",{staticClass:"logoutButton",on:{click:function(s){return t.logout()}}},[t._m(0),t._v(" 登出 ")])])])])},r=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"icon"},[e("img",{staticClass:"logout",attrs:{alt:""}})])}],i=e("2f62"),o={computed:{...Object(i["b"])(["currentUser","isAuthenticated"])},methods:{logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")},showNewCreateModal(){this.$modal.show("tweetCreate")}}},n=o,l=e("2877"),c=Object(l["a"])(n,a,r,!1,null,null,null);s["a"]=c.exports},ed81:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app-tripple-column"},[e("div",{staticClass:"left-container"},[e("NavBar")],1),e("div",{staticClass:"middle-container"},[e("router-view")],1),e("div",{staticClass:"right-container"},[e("Popular")],1)])},r=[],i=e("d000"),o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"popular-wrapper"},[e("div",{staticClass:"title"},[t._v("Popular")]),t.isLoading?e("img",{staticClass:"spinner"}):t._l(t.popularUser,(function(s){return e("div",{key:s.id,staticClass:"popularCard"},[e("div",{staticClass:"avatar-wrapper"},[e("img",{attrs:{src:t._f("emptyImage")(s.avatar),alt:""},on:{click:function(e){return t.linkedUser(s.id)}}})]),e("div",{staticClass:"name-wrapper",on:{click:function(e){return t.linkedUser(s.id)}}},[t._v(" "+t._s(s.name)+" "),e("div",{staticClass:"account-wrapper"},[t._v(t._s(t._f("accountTag")(s.account)))])]),s.isFollowed?e("button",{staticClass:"deleteFollow btn",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFollow(s.id)}}},[t._v(" 正在跟隨 ")]):e("button",{staticClass:"addFollow btn",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollow(s.id)}}},[t._v(" 跟隨 ")])])}))],2)},n=[],l=(e("d9e2"),e("4cce")),c=e("2f62"),u=e("2fa3"),d=e("2708"),p={mixins:[d["a"],d["b"]],data(){return{popularUser:[],isProcessing:!1,isLoading:!1}},created(){this.fetchPopular()},computed:{...Object(c["b"])(["currentUser"])},methods:{async fetchPopular(){try{this.isLoading=!0;const t=await l["a"].getTopUser();this.isLoading=!1,this.popularUser=t.data}catch(t){this.isLoading=!1,u["a"].fire({icon:"error",title:"無法取得熱門使用者資料，請稍後再試"})}},linkedUser(t){this.$router.push({name:"otherTweet",params:{id:t}})},async addFollow(t){try{this.isProcessing=!0;const{data:s}=await l["a"].addFollow({id:t});if("success"!==s.status)throw new Error(s.message);this.isProcessing=!1,this.popularUser=this.popularUser.map(s=>s.id===t?{...s,isFollowed:!0}:s)}catch(s){this.isProcessing=!1,u["a"].fire({icon:"error",title:"無法追隨使用者，請稍後再試"}),console.log("error",s)}},async deleteFollow(t){try{this.isProcessing=!0;const{data:s}=await l["a"].deleteFollow({followingId:t});if("success"!==s.status)throw new Error(s.message);this.isProcessing=!1,this.popularUser=this.popularUser.map(s=>s.id===t?{...s,isFollowed:!1}:s)}catch(s){this.isProcessing=!1,u["a"].fire({icon:"error",title:"無法取消追隨使用者，請稍後再試"}),console.log("error",s)}}}},h=p,g=e("2877"),w=Object(g["a"])(h,o,n,!1,null,null,null),v=w.exports,f={components:{NavBar:i["a"],Popular:v}},m=f,C=Object(g["a"])(m,a,r,!1,null,null,null);s["default"]=C.exports}}]);
//# sourceMappingURL=chunk-5ccf08ca.1a915157.js.map
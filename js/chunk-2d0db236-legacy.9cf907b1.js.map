{"version":3,"sources":["webpack:///./src/views/Tweet.vue?91a7","webpack:///./src/components/TweetReplyCard.vue?340b","webpack:///src/components/TweetReplyCard.vue","webpack:///./src/components/TweetReplyCard.vue?6610","webpack:///./src/components/TweetReplyCard.vue","webpack:///src/views/Tweet.vue","webpack:///./src/views/Tweet.vue?1381","webpack:///./src/views/Tweet.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","$router","back","_v","linkedUser","user","id","attrs","_f","avatar","_s","name","account","repliedTweet","description","createdAt","replyCards","length","likeCount","showReplyModal","deleteLike","addLike","_l","replyCard","key","staticRenderFns","userId","userName","userAccount","targetUserId","targetAccount","comment","mixins","props","replyTarget","type","required","data","tweetId","computed","mapState","methods","fetchReplyCard","UserId","User","currentUser","push","params","created","watch","newValue","component","components","TweetReplyCard","paramsId","isLoading","isProcessing","fetchRepliedTweet","tweetsAPI","statusText","Toast","icon","title","fetchTweetReplyCards","afterSubmitReplyCreate","unshift","$modal","show","$store","commit","replyTargetData","Number","beforeRouteUpdate","to","from","next","replyCreate"],"mappings":"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","file":"js/chunk-2d0db236-legacy.9cf907b1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isLoading)?_c('img',{staticClass:\"spinner\"}):_c('div',[_c('div',{staticClass:\"tweet-wrapper\"},[_c('div',{staticClass:\"tweet-title\"},[_c('img',{staticClass:\"arrow\",on:{\"click\":function($event){return _vm.$router.back()}}}),_c('h3',[_vm._v(\"推文\")])]),_c('div',{staticClass:\"tweet-main\"},[_c('div',{staticClass:\"card-head\"},[_c('div',{staticClass:\"card-head-left avatar\",on:{\"click\":function($event){return _vm.linkedUser(_vm.user.id)}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.user.avatar)}})]),_c('div',{staticClass:\"card-head-right\"},[_c('h5',{on:{\"click\":function($event){return _vm.linkedUser(_vm.user.id)}}},[_vm._v(_vm._s(_vm.user.name))]),_c('h5',[_vm._v(_vm._s(_vm._f(\"accountTag\")(_vm.user.account)))])])]),_c('div',{staticClass:\"tweet-body\"},[_c('p',[_vm._v(_vm._s(_vm.repliedTweet.description))]),_c('h5',[_vm._v(_vm._s(_vm._f(\"timeFormat\")(_vm.repliedTweet.createdAt)))])]),_c('div',{staticClass:\"tweet-footer\"},[_c('div',{staticClass:\"tweet-footer-info\"},[_c('h4',[_c('strong',[_vm._v(_vm._s(_vm.replyCards.length))]),_vm._v(\" 回覆 \")]),_c('h4',[_c('strong',[_vm._v(_vm._s(_vm.repliedTweet.likeCount))]),_vm._v(\" 喜歡次數 \")])]),_c('div',{staticClass:\"tweet-footer-buttons\"},[_c('img',{staticClass:\"reply-big\",on:{\"click\":function($event){return _vm.showReplyModal()}}}),(_vm.repliedTweet.isLiked)?_c('img',{staticClass:\"heart-big-active\",on:{\"click\":function($event){return _vm.deleteLike()}}}):_c('img',{staticClass:\"heart-big\",on:{\"click\":function($event){return _vm.addLike()}}})])])])]),_vm._l((_vm.replyCards),function(replyCard){return _c('div',{key:replyCard.id,staticClass:\"tweet-replies\"},[_c('TweetReplyCard',{attrs:{\"reply-target\":_vm.user,\"reply-card\":replyCard}})],1)})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tweetReplyCard-wrapper\"},[_c('div',{staticClass:\"card-left avatar\",on:{\"click\":function($event){return _vm.linkedUser(_vm.userId)}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.avatar)}})]),_c('div',{staticClass:\"card-right\"},[_c('div',{staticClass:\"card-head\"},[_c('h5',{staticClass:\"card-name\",on:{\"click\":function($event){return _vm.linkedUser(_vm.userId)}}},[_vm._v(\" \"+_vm._s(_vm.userName)+\" \")]),_c('h5',{staticClass:\"card-account\"},[_vm._v(\" \"+_vm._s(_vm._f(\"accountTag\")(_vm.userAccount))+\" \")]),_c('span',[_vm._v(\"．\")]),_c('h5',{staticClass:\"card-time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(_vm.createdAt))+\" \")])]),_c('h5',[_c('span',[_vm._v(\"回覆\")]),_c('span',{staticClass:\"card-replyer\",on:{\"click\":function($event){return _vm.linkedUser(_vm.targetUserId)}}},[_vm._v(\" \"+_vm._s(_vm._f(\"accountTag\")(_vm.targetAccount))+\" \")])]),_c('p',[_vm._v(_vm._s(_vm.comment))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tweetReplyCard-wrapper\">\n    <div class=\"card-left avatar\" @click=\"linkedUser(userId)\">\n      <img class=\"avatar\" :src=\"avatar | emptyImage\" />\n    </div>\n    <div class=\"card-right\">\n      <div class=\"card-head\">\n        <h5 class=\"card-name\" @click=\"linkedUser(userId)\">\n          {{ userName }}\n        </h5>\n        <h5 class=\"card-account\">\n          {{ userAccount | accountTag }}\n        </h5>\n        <span>．</span>\n        <h5 class=\"card-time\">\n          {{ createdAt | fromNow }}\n        </h5>\n      </div>\n      <h5>\n        <span>回覆</span>\n        <span class=\"card-replyer\" @click=\"linkedUser(targetUserId)\">\n          {{ targetAccount | accountTag }}\n        </span>\n      </h5>\n      <p>{{ comment }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  fromNowFilter,\n  accountTagFilter,\n  emptyImageFilter,\n} from \"../utils/mixins\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  mixins: [fromNowFilter, accountTagFilter, emptyImageFilter],\n  props: {\n    // 被回覆者的資料\n    replyTarget: {\n      type: Object,\n      required: true,\n    },\n    // 每筆回覆貼文的資料\n    replyCard: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      // 被回覆的對象\n      targetAccount: \"\",\n      targetUserId: 0,\n      // 此卡片的其他資料\n      tweetId: 0,\n      userId: 0,\n      comment: \"\",\n      createdAt: \"\",\n      userName: \"\",\n      userAccount: \"\",\n      avatar: \"\",\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  methods: {\n    fetchReplyCard() {\n      // 被回覆的對象\n      this.targetAccount = this.replyTarget.account;\n      this.targetUserId = this.replyTarget.id;\n      // 此卡片的其他資料\n      const { id, comment, createdAt, UserId, User } = this.replyCard;\n      this.tweetId = id;\n      this.userId = UserId;\n      this.comment = comment;\n      this.createdAt = createdAt;\n      this.userName = User.name;\n      this.userAccount = User.account;\n      this.avatar = User.avatar;\n    },\n    linkedUser(userId) {\n      if (userId === this.currentUser.id) {\n        this.$router.push({ name: \"self\" });\n      } else {\n        this.$router.push({ name: \"other\", params: { id: userId } });\n      }\n    },\n  },\n  created() {\n    this.fetchReplyCard();\n  },\n  watch: {\n    replyCard(newValue) {\n      this.replyCard = newValue;\n      this.fetchReplyCard();\n    },\n    replyTarget(newValue) {\n      this.replyTarget = newValue;\n      this.fetchReplyCard();\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetReplyCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetReplyCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetReplyCard.vue?vue&type=template&id=80570670&\"\nimport script from \"./TweetReplyCard.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetReplyCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <img v-if=\"isLoading\" class=\"spinner\" />\n    <div v-else>\n      <div class=\"tweet-wrapper\">\n        <div class=\"tweet-title\">\n          <img @click=\"$router.back()\" class=\"arrow\" />\n          <h3>推文</h3>\n        </div>\n        <div class=\"tweet-main\">\n          <div class=\"card-head\">\n            <div class=\"card-head-left avatar\" @click=\"linkedUser(user.id)\">\n              <img class=\"avatar\" :src=\"user.avatar | emptyImage\" />\n            </div>\n            <div class=\"card-head-right\">\n              <h5 @click=\"linkedUser(user.id)\">{{ user.name }}</h5>\n              <h5>{{ user.account | accountTag }}</h5>\n            </div>\n          </div>\n          <div class=\"tweet-body\">\n            <p>{{ repliedTweet.description }}</p>\n            <h5>{{ repliedTweet.createdAt | timeFormat }}</h5>\n          </div>\n          <div class=\"tweet-footer\">\n            <div class=\"tweet-footer-info\">\n              <h4>\n                <strong>{{ replyCards.length }}</strong> 回覆\n              </h4>\n              <h4>\n                <strong>{{ repliedTweet.likeCount }}</strong> 喜歡次數\n              </h4>\n            </div>\n            <div class=\"tweet-footer-buttons\">\n              <img class=\"reply-big\" @click=\"showReplyModal()\" />\n              <img\n                v-if=\"repliedTweet.isLiked\"\n                @click=\"deleteLike()\"\n                class=\"heart-big-active\"\n              />\n              <img v-else @click=\"addLike()\" class=\"heart-big\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"tweet-replies\"\n        v-for=\"replyCard in replyCards\"\n        :key=\"replyCard.id\"\n      >\n        <TweetReplyCard :reply-target=\"user\" :reply-card=\"replyCard\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TweetReplyCard from \"../components/TweetReplyCard.vue\";\nimport tweetsAPI from \"../apis/tweets\";\nimport { mapState } from \"vuex\";\nimport {\n  accountTagFilter,\n  timeFormatFilter,\n  emptyImageFilter,\n} from \"../utils/mixins\";\nimport { Toast } from \"../utils/helpers\";\n\nexport default {\n  name: \"Tweet\",\n  components: {\n    TweetReplyCard,\n  },\n  mixins: [accountTagFilter, timeFormatFilter, emptyImageFilter],\n  computed: {\n    ...mapState([\"currentUser\", \"replyCreate\"]),\n  },\n  data() {\n    return {\n      paramsId: 0,\n      user: {},\n      repliedTweet: {},\n      replyCards: [],\n      isLoading: false,\n      isProcessing: false,\n    };\n  },\n  methods: {\n    async fetchRepliedTweet(paramsId) {\n      // 主貼文資料：\n      try {\n        this.isLoading = true;\n        const { data, statusText } = await tweetsAPI.getRepliedTweet({\n          tweetId: paramsId,\n        });\n        if (statusText !== \"OK\") throw new Error(statusText);\n        this.isLoading = false;\n        this.user = data.User;\n        this.repliedTweet = { ...data };\n      } catch (error) {\n        this.isLoading = false;\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得推文內容，請稍後再試\",\n        });\n      }\n    },\n    async fetchTweetReplyCards(paramsId) {\n      // 所有回覆卡片的陣列\n      try {\n        this.isLoading = true;\n        const { data, statusText } = await tweetsAPI.getAllReplies({\n          tweetId: paramsId,\n        });\n        if (statusText !== \"OK\") throw new Error(statusText);\n        this.isLoading = false;\n        this.replyCards = [...data];\n      } catch (error) {\n        this.isLoading = false;\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得回覆推文，請稍後再試\",\n        });\n      }\n    },\n    afterSubmitReplyCreate(data) {\n      this.replyCards.unshift({\n        comment: data.comment,\n        id: data.id,\n        createdAt: data.createdAt,\n        User: {\n          avatar: this.currentUser.avatar,\n          account: this.currentUser.account,\n          name: this.currentUser.name,\n        },\n      });\n    },\n    async addLike() {\n      try {\n        this.isProcessing = true;\n        const { statusText, data } = await tweetsAPI.addLike({\n          tweetId: this.paramsId,\n        });\n        if (statusText !== \"OK\" || data.status !== \"success\")\n          throw new Error(statusText);\n        this.isProcessing = false;\n        this.repliedTweet.isLiked = true;\n        this.repliedTweet.likeCount++;\n      } catch (error) {\n        this.isProcessing = false;\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法加入最愛，請稍後再試\",\n        });\n      }\n    },\n    async deleteLike() {\n      try {\n        this.isProcessing = true;\n        const { statusText, data } = await tweetsAPI.deleteLike({\n          tweetId: this.paramsId,\n        });\n        if (statusText !== \"OK\" || data.status !== \"success\")\n          throw new Error(statusText);\n        this.isProcessing = false;\n        this.repliedTweet.isLiked = false;\n        this.repliedTweet.likeCount--;\n      } catch (error) {\n        this.isProcessing = false;\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取消最愛，請稍後再試\",\n        });\n      }\n    },\n    linkedUser(userId) {\n      if (userId === this.currentUser.id) {\n        this.$router.push({ name: \"self\" });\n      } else {\n        this.$router.push({ name: \"other\", params: { id: userId } });\n      }\n    },\n    showReplyModal() {\n      this.$modal.show(\"replyCreate\");\n      const { id, User, description, createdAt } = this.repliedTweet;\n      const replyTargetData = {\n        id,\n        name: User.name,\n        userId: User.id,\n        account: User.account,\n        avatar: User.avatar,\n        description,\n        createdAt,\n      };\n      this.$store.commit(\"setTweetReplyTarget\", replyTargetData);\n    },\n  },\n  created() {\n    const { id } = this.$route.params;\n    this.paramsId = Number(id);\n    this.fetchRepliedTweet(this.paramsId);\n    this.fetchTweetReplyCards(this.paramsId);\n  },\n  beforeRouteUpdate(to, from, next) {\n    const { id } = to.params;\n    this.paramsId = Number(id);\n    this.fetchRepliedTweet(this.paramsId);\n    this.fetchTweetReplyCards(this.paramsId);\n    next();\n  },\n  watch: {\n    replyCreate(newValue) {\n      this.afterSubmitReplyCreate(newValue);\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tweet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tweet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tweet.vue?vue&type=template&id=c40c84ea&\"\nimport script from \"./Tweet.vue?vue&type=script&lang=js&\"\nexport * from \"./Tweet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
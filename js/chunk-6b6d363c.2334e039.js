(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b6d363c"],{be6c:function(t,e,s){"use strict";var r=s("2fa3");const a=()=>localStorage.getItem("token");e["a"]={adminSignIn({account:t,password:e}){return r["b"].post("api/admin/signin",{account:t,password:e})},deleteTweet({tweetId:t}){return r["b"].delete("api/admin/tweets/"+t,{headers:{Authorization:"Bearer "+a()}})},getAdminUsers(){return r["b"].get("api/admin/users",{headers:{Authorization:"Bearer "+a()}})}}},d946:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signin-wrapper"},[s("img",{staticClass:"logo-big",attrs:{alt:""}}),s("h2",[t._v("後台登入")]),s("div",{staticClass:"form-wrapper"},[s("form",{attrs:{id:"signInForm"},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleFormSubmit.apply(null,arguments)}}},[s("label",{class:["label",{isInvalid:t.account.isInvalid}],attrs:{for:""}},[t._v(" 帳號 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.text,expression:"account.text",modifiers:{trim:!0}}],attrs:{name:"account",type:"text"},domProps:{value:t.account.text},on:{input:function(e){e.target.composing||t.$set(t.account,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.account)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.account)))])]),s("label",{class:["label",{isInvalid:t.password.isInvalid}],attrs:{for:""}},[t._v(" 密碼 "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password.text,expression:"password.text",modifiers:{trim:!0}}],attrs:{name:"password",type:"password",autocomplete:"off"},domProps:{value:t.password.text},on:{input:function(e){e.target.composing||t.$set(t.password,"text",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"wordLimit-wrapper"},[s("h5",[t._v(t._s(t.worLimitMessage(t.password)))]),s("h5",[t._v(t._s(t.wordLimitCount(t.password)))])]),s("button",{staticClass:"btn active",attrs:{form:"signInForm",type:"submit",disabled:t.isProcessing}},[t._v(" 登入 ")])])]),s("div",{staticClass:"link-wrapper"},[s("router-link",{staticClass:"link",attrs:{to:"/signin"}},[t._v(" 前台登入 ")])],1)])},a=[],i=(s("d9e2"),s("be6c")),n=s("2fa3"),o={data(){return{account:{text:"",isInvalid:!1},password:{text:"",isInvalid:!1},isProcessing:!1}},computed:{worLimitMessage(){return t=>t.text.length>50?(t.isInvalid=!0,"字數超過上限！"):(t.isInvalid=!1,"")},wordLimitCount(){return t=>t.text.length<1?"":t.text.length+"/50"}},methods:{async handleFormSubmit(){try{const t=this.account.text,e=this.password.text;if(!t||!e)return n["a"].fire({icon:"error",title:"帳號密碼不可空白"});if(t.length>50||e.length>50)return n["a"].fire({icon:"error",title:"字數超過上限"});this.isProcessing=!0;const{data:s,statusText:r}=await i["a"].adminSignIn({account:t,password:e});if("OK"!==r||"success"!==s.status)throw new Error(s.message);this.isProcessing=!1,localStorage.setItem("token",s.token),this.$store.commit("setCurrentUser",s.user),this.$router.push("/admin/tweets")}catch(t){this.isProcessing=!1,this.password.text="",n["a"].fire({icon:"error",title:t.message})}}}},c=o,u=s("2877"),l=Object(u["a"])(c,r,a,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-6b6d363c.2334e039.js.map
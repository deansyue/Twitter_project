(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-768fbde6"],{2933:function(e,t,r){"use strict";r("ae2e")},"4cce":function(e,t,r){"use strict";r("b0c0");var a=r("2fa3"),s=function(){return localStorage.getItem("token")};t["a"]={getUser:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t),{headers:{Authorization:"Bearer ".concat(s())}})},getUserTweets:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserReplies:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserLikes:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/likes"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowers:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/followers"),{headers:{Authorization:"Bearer ".concat(s())}})},getFollowings:function(e){var t=e.userId;return a["b"].get("api/users/".concat(t,"/followings"),{headers:{Authorization:"Bearer ".concat(s())}})},editInformation:function(e){var t=e.id,r=e.formData;return a["b"].put("api/users/".concat(t),r,{headers:{Authorization:"Bearer ".concat(s())}})},signEdit:function(e){var t=e.userId,r=e.account,n=e.name,i=e.email,c=e.password,o=e.checkPassword;return a["b"].put("api/users/".concat(t,"/edit"),{account:r,name:n,email:i,password:c,checkPassword:o},{headers:{Authorization:"Bearer ".concat(s())}})},addFollow:function(e){var t=e.id;return a["b"].post("/api/followships",{id:t},{headers:{Authorization:"Bearer ".concat(s())}})},deleteFollow:function(e){var t=e.followingId;return a["b"].delete("api/followships/".concat(t),{headers:{Authorization:"Bearer ".concat(s())}})},getTopUser:function(){return a["b"].get("api/users/top",{headers:{Authorization:"Bearer ".concat(s())}})}}},9210:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLoading?r("img",{staticClass:"spinner"}):e._e(),e._l(e.likeTweets,(function(t){return r("div",{key:t.id,staticClass:"self-like"},[r("div",{staticClass:"tweetCard-wrapper"},[r("div",{staticClass:"card-left avatar",on:{click:function(r){return e.linkedUser(t.Tweet.UserId)}}},[r("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(t.Tweet.User.avatar)}})]),r("div",{staticClass:"card-right",on:{click:function(r){return e.linkedReply(r,t.Tweet.id)}}},[r("div",{staticClass:"card-head"},[r("h5",{staticClass:"card-name",on:{click:function(r){return e.linkedUser(t.Tweet.UserId)}}},[e._v(" "+e._s(t.Tweet.User.name)+" ")]),r("h5",{staticClass:"card-account"},[e._v(" "+e._s(e._f("accountTag")(t.Tweet.User.account))+" ")]),r("span",[e._v("．")]),r("h5",{staticClass:"card-time"},[e._v(" "+e._s(e._f("fromNow")(t.Tweet.createdAt))+" ")])]),r("p",[e._v(" "+e._s(t.Tweet.description)+" ")]),r("p"),r("div",{staticClass:"card-foot"},[r("img",{staticClass:"reply",on:{click:function(r){return e.showReplyModal(t.Tweet.id,t.Tweet.User.name,t.Tweet.UserId,t.Tweet.User.account,t.Tweet.User.avatar,t.Tweet.description,t.Tweet.createdAt)}}}),r("h6",[e._v(e._s(t.replyCount))]),t.isLiked?r("img",{staticClass:"heart-active",on:{click:function(r){return e.deleteLikes(t.Tweet.id)}}}):r("img",{staticClass:"heart",on:{click:function(r){return e.addLikes(t.Tweet.id)}}}),r("h6",[e._v(e._s(t.likeCount))])])])])])}))],2)},s=[],n=r("1da1"),i=r("5530"),c=(r("96cf"),r("b0c0"),r("d9e2"),r("d81d"),r("6783")),o=r("2fa3"),u=r("2708"),d=r("2f62"),l=r("4cce"),h={mixins:[u["c"],u["a"],u["b"]],data:function(){return{isProcessing:!1,likeTweets:[],isLoading:!1}},computed:Object(i["a"])({},Object(d["b"])(["currentUser"])),methods:{fetchLikeTweets:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,l["a"].getUserLikes({userId:"like"===t.$route.name?t.currentUser.id:e});case 4:a=r.sent,t.isLoading=!1,t.likeTweets=a.data,r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),t.isLoading=!1,o["a"].fire({icon:"error",title:"無法取得最愛貼文資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},addLikes:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,c["a"].addLike({tweetId:e});case 4:if(a=r.sent,s=a.statusText,n=a.data,"OK"===s&&"success"===n.status){r.next=9;break}throw new Error(s);case 9:t.isProcessing=!1,t.likeTweets=t.likeTweets.map((function(t){return t.Tweet.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isLiked:!0,likeCount:t.likeCount+1}):t})),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,o["a"].fire({icon:"error",title:"無法加入最愛，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},deleteLikes:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,c["a"].deleteLike({tweetId:e});case 4:if(a=r.sent,s=a.statusText,n=a.data,"OK"===s&&"success"===n.status){r.next=9;break}throw new Error(s);case 9:t.isProcessing=!1,t.likeTweets=t.likeTweets.map((function(t){return t.Tweet.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isLiked:!1,likeCount:t.likeCount-1}):t})),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,o["a"].fire({icon:"error",title:"無法取消最愛，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},linkedUser:function(e){e===this.currentUser.id?this.$router.push({name:"selfTweet"}):this.$router.push({name:"otherTweet",params:{id:e}})},linkedReply:function(e,t){e.target.matches(".reply")||e.target.matches(".heart")||e.target.matches(".heart-active")||e.target.matches(".avatar")||e.target.matches(".card-name")||this.$router.push({name:"tweet",params:{id:t}})},showReplyModal:function(e,t,r,a,s,n,i){this.$modal.show("replyCreate");var c={id:e,name:t,userId:r,account:a,avatar:s,description:n,createdAt:i};this.$store.commit("setTweetReplyTarget",c)}},created:function(){this.fetchLikeTweets(this.$route.params.id)},beforeRouteUpdate:function(e,t,r){this.fetchLikeTweets(e.params.id),r()}},w=h,p=(r("2933"),r("2877")),f=Object(p["a"])(w,a,s,!1,null,"9d109bb6",null);t["default"]=f.exports},ae2e:function(e,t,r){}}]);
//# sourceMappingURL=chunk-768fbde6-legacy.acda9f2c.js.map